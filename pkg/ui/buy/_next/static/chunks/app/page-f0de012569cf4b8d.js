(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1931],{43795:function(e,t,s){Promise.resolve().then(s.bind(s,54565))},54565:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var n=s(57437),a=s(2265),i=s(24033),l=s(59494),r=s(56926),c=s(99289),d=s(85952),u=JSON.parse('[{"inputs":[{"internalType":"address","name":"nftAddress","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"uint256","name":"price","type":"uint256"},{"internalType":"uint256","name":"uid","type":"uint256"},{"internalType":"uint256","name":"validUntil","type":"uint256"},{"internalType":"bytes","name":"signature","type":"bytes"}],"stateMutability":"payable","type":"function","name":"buyNFT"}]'),h=()=>{let{address:e}=(0,r.mA)(),{switchNetwork:t}=(0,r.g0)(),s=(0,i.useSearchParams)(),[h,x]=(0,a.useState)(s.get("nft")||""),[o,m]=(0,a.useState)(s.get("id")||""),[p,f]=(0,a.useState)(s.get("price")||""),[j,g]=(0,a.useState)(s.get("uid")||""),[y,N]=(0,a.useState)(s.get("valid")||""),[b,v]=(0,a.useState)(s.get("sig")||""),[S,F]=(0,a.useState)(s.get("chain")||null),[T,k]=(0,a.useState)(""),[C,A]=(0,a.useState)(null),[w,I]=(0,a.useState)(!1),{data:_,isLoading:D}=(0,r.do)({abi:c.YD,address:h,functionName:"tokenURI",args:[BigInt(o)]}),{writeAsync:E,isLoading:O}=(0,r.GG)({address:"0x7b1431A0f20A92dD7E42A28f7Ba9FfF192F36DF3",abi:u,functionName:"buyNFT",args:[h,o,p,j,y,b],value:(0,l.f)(p)}),U=async()=>{await E()};return(0,a.useEffect)(()=>{S&&(null==t||t(parseInt(S))),_&&(async()=>{try{let e=_;e.startsWith("ipfs://")&&(e="https://ipfs.io/ipfs/".concat(e.slice(7)));let t=await fetch(e),s=await t.json();A(s);let n=s.image;n&&n.startsWith("ipfs://")&&(n="https://ipfs.io/ipfs/".concat(n.slice(7))),k(n||"")}catch(e){console.error("Failed to fetch metadata:",e)}})()},[_]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"flex items-center flex-col flex-grow pt-10",children:(0,n.jsxs)("div",{className:"px-5",children:[(0,n.jsxs)("h1",{className:"text-center",children:[(0,n.jsx)("span",{className:"block text-2xl mb-2"}),(0,n.jsx)("span",{className:"block text-4xl font-bold"})]}),T&&(0,n.jsx)("div",{className:"my-4",children:(0,n.jsx)("img",{src:T,alt:"NFT Image",className:"max-w-xs max-h-96"})}),T&&(0,n.jsxs)("div",{className:"my-4",children:[(0,n.jsxs)("div",{className:"my-4 flex items-center cursor-pointer",onClick:()=>I(!w),children:[(0,n.jsx)("span",{className:"text-lg font-bold",children:"NFT Metadata"}),(0,n.jsx)("span",{className:"ml-2",children:w?"▼":"▶"})]}),w&&C&&(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)("pre",{children:JSON.stringify(C,null,2)})})]}),(0,n.jsx)("div",{children:(0,n.jsxs)("label",{children:["NFT Address:",(0,n.jsx)(d.Jg,{value:h,onChange:e=>x(e)})]})}),(0,n.jsx)("div",{children:(0,n.jsxs)("label",{children:["NFT ID:",(0,n.jsx)(d.dh,{value:o,onChange:e=>m(e.toString())})]})}),(0,n.jsx)("div",{children:(0,n.jsxs)("label",{children:["Price:",(0,n.jsx)(d.dh,{value:p,onChange:e=>f(e.toString())})]})}),(0,n.jsx)("div",{children:(0,n.jsxs)("label",{children:["UID:",(0,n.jsx)(d.dh,{value:j,onChange:e=>g(e.toString())})]})}),(0,n.jsx)("div",{children:(0,n.jsxs)("label",{children:["Valid Until:",(0,n.jsx)(d.dh,{value:y,onChange:e=>N(e.toString())})]})}),(0,n.jsx)("div",{children:(0,n.jsxs)("label",{children:["Auctioneer Signature:",(0,n.jsx)(d.MA,{value:b,onChange:e=>v(e)})]})}),(0,n.jsx)("div",{children:"---"}),(0,n.jsx)("button",{onClick:U,children:"Buy NFT"})]})})})}},24033:function(e,t,s){e.exports=s(15313)}},function(e){e.O(0,[9472,8325,3689,2971,4938,1744],function(){return e(e.s=43795)}),_N_E=e.O()}]);