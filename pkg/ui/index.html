<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- This sets window.our.node -->
    <script src="/our.js"></script>

    <meta charset="UTF-8" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Barlow+Condensed:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <link rel="icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNzc5IiBoZWlnaHQ9IjUxNCIgdmlld0JveD0iMCAwIDc3OSA1MTQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8c3R5bGU+CiAgICAgICAgQG1lZGlhIChwcmVmZXJzLWNvbG9yLXNjaGVtZTogZGFyaykgewogICAgICAgICAgICBzdmcgeyBmaWxsOiB3aGl0ZTsgfQogICAgICAgIH0KICAgICAgICBAbWVkaWEgKHByZWZlcnMtY29sb3Itc2NoZW1lOiBsaWdodCkgewogICAgICAgICAgICBzdmcgeyBmaWxsOiBibGFjazsgfQogICAgICAgIH0KICAgIDwvc3R5bGU+CiAgICA8cGF0aCBkPSJNNzUzLjA5MiA1LjkxOTMyQzc1Ni41NTcgNS4wOTk3NiA3NTUuOTYyIC0wLjAwMDEyMjA3IDc1Mi40MDEgLTAuMDAwMTIyMDdINDI2LjAwMUM0MjQuNzU1IC0wLjAwMDEyMjA3IDQyMy42MzkgMC43NzAyNyA0MjMuMTk3IDEuOTM1MzVMMjM2Ljk2OCA0OTIuNkMyMzUuNzI5IDQ5NS44NjUgMjQwLjEyMyA0OTguMjU1IDI0Mi4xOTEgNDk1LjQ0MUw1NjkuMzU3IDUwLjExMzJDNTY5Ljc3OCA0OS41MzkyIDU3MC4zOTEgNDkuMTMzOSA1NzEuMDg0IDQ4Ljk3TDc1My4wOTIgNS45MTkzMloiLz4KICAgIDxwYXRoIGQ9Ik0xMS45NjY1IDQwLjIyODhDOS4xMDk0OSAzOC43NzcgMTAuMjEzNSAzNC40NTgzIDEzLjQxNjcgMzQuNTU1N0w0MDQuMjczIDQ2LjQzNjdDNDA2LjMzNCA0Ni40OTkzIDQwNy43MTkgNDguNTc0OSA0MDYuOTg2IDUwLjUwMjNMMzQ3LjQzOCAyMDYuOTgxQzM0Ni44MDQgMjA4LjY0NyAzNDQuODY1IDIwOS4zOTYgMzQzLjI3NSAyMDguNTg4TDExLjk2NjUgNDAuMjI4OFoiLz4KPC9zdmc+Cg==">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Cross-Origin-Opener-Policy" content="same-origin-allow-popups" />
    <link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet'>
    <title>Chess</title>
    <script type="module" crossorigin src="/chess:chess:sys/assets/index-237df385.js"></script>
    <link rel="stylesheet" href="/chess:chess:sys/assets/index-383827d3.css">
    <style>
      .tooltip {
          position: relative;
          display: inline-block;
      }

      .tooltip .tooltiptext {
          visibility: hidden;
          width: 20vw; /* Changed to viewport width for responsiveness */
          min-width: 10rem; /* Minimum width to ensure readability */
          background-color: black;
          color: #fff;
          text-align: left;
          border-radius: 0.5rem;
          padding: 1rem; /* Increased padding for better spacing */
          position: absolute;
          z-index: 1;
          bottom: 100%;
          left: 50%;
          transform: translateX(-50%); /* Centering tooltip */
          opacity: 0;
          transition: opacity 0.3s;
          white-space: normal;
          overflow-y: auto; /* Enable vertical scrolling */
          max-height: 30vh; /* Increased maximum height relative to the viewport height */
          font-size: 0.8rem; /* Smaller text size */
      }

      .tooltip:hover .tooltiptext {
          visibility: visible;
          opacity: 1;
      }
    </style>
  </head>
  <body>
    <main class="col">
        <h1>Configuration</h1>
        <form id="config-form" class="col">
            <label for="openai-key">OpenAI API Key <span class="tooltip">?
                <span class="tooltiptext">
                    1. Visit OpenAI's signup page.<br>
                    2. Create an account and navigate to API section.<br>
                    3. Click "New API Key" to generate a key.<br>
                    4. Securely copy the API key displayed.<br>
                    5. Type 'y' to proceed with entering the API key.<br>
                    6. Paste the API key into the input.
                </span>
            </span></label>
            <input id="openai-key" required="" name="openai-key" placeholder="OpenAI API Key" value="">
            
            <label for="telegram-bot-api-key">Telegram Bot API Key <span class="tooltip">?
                <span class="tooltiptext">
                    1. Open Telegram and search for "@BotFather".<br>
                    2. Start a conversation and type `/newbot`.<br>
                    3. Follow prompts to create a new bot.<br>
                    4. Securely copy the API key displayed.<br>
                    5. Type 'y' to proceed with entering the bot API key.<br>
                    6. Paste the bot API key into the input.
                </span>
            </span></label>
            <input id="telegram-bot-api-key" required="" name="telegram-bot-api-key" placeholder="Telegram Bot API Key" value="">
            
            <label for="private-wallet-address">Private Wallet Address <span class="tooltip">?
                <span class="tooltiptext">
                    1. Choose a wallet provider and create a new wallet.<br>
                    2. Securely go through the wallet creation process.<br>
                    3. Access your wallet to find your Ethereum address.<br>
                    4. **Never share your private key.**<br>
                    5. Type 'y' to proceed with entering your Ethereum address.<br>
                    6. Use your Ethereum address as directed.
                </span>
            </span></label>
            <input id="private-wallet-address" required="" name="private-wallet-address" placeholder="Private Wallet Address" value="">
            <button> Submit </button>
        </form>
    </main>
    <script>
        async function submitConfig(openaiKey, telegramKey, walletAddress) {
          const result = await fetch("/auctioneer:auctioneer:template.os/api", {
            method: "PUT",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ "openai_key": openaiKey, "telegram_bot_api_key": telegramKey, "private_wallet_address": walletAddress }),
          });
          console.log(result);
        }

        document.addEventListener("DOMContentLoaded", () => {
          const form = document.getElementById("config-form");
          form.addEventListener("submit", (e) => {
            e.preventDefault();
            e.stopPropagation();
            const openaiKey = document.getElementById("openai-key").value;
            const telegramKey = document.getElementById("telegram-bot-api-key").value;
            const walletAddress = document.getElementById("private-wallet-address").value;
            submitConfig(openaiKey, telegramKey, walletAddress);
          });
        });
    </script>
  </body>
</html>
